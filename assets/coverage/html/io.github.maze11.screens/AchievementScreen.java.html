<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AchievementScreen.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">core</a> &gt; <a href="index.source.html" class="el_package">io.github.maze11.screens</a> &gt; <span class="el_source">AchievementScreen.java</span></div><h1>AchievementScreen.java</h1><pre class="source lang-java linenums">package io.github.maze11.screens;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Preferences;
import com.badlogic.gdx.graphics.Color;
import com.badlogic.gdx.graphics.g2d.BitmapFont;
import com.badlogic.gdx.scenes.scene2d.InputEvent;
import com.badlogic.gdx.scenes.scene2d.ui.Label;
import com.badlogic.gdx.scenes.scene2d.ui.Table;
import com.badlogic.gdx.scenes.scene2d.ui.TextButton;
import com.badlogic.gdx.scenes.scene2d.utils.ClickListener;
import io.github.maze11.MazeGame;
import io.github.maze11.achievements.Achievement;
import io.github.maze11.achievements.AchievementManager;
import io.github.maze11.ui.FontGenerator;
import java.util.HashMap;
import java.util.Map;

public class AchievementScreen extends BaseMenuScreen {

<span class="nc" id="L21">  private static Map&lt;String, Achievement&gt; achievements = new HashMap&lt;&gt;();</span>
  private static Preferences prefs;
<span class="nc" id="L23">  private static final String[] achievementNames = AchievementManager.achievementNames;</span>
<span class="nc" id="L24">  private static final String[] achievementDescriptions =</span>
      AchievementManager.achievementDescriptions;
<span class="nc" id="L26">  private static boolean aboutToWipeData = false;</span>

  public AchievementScreen(MazeGame game) {
<span class="nc" id="L29">    super(game);</span>
<span class="nc" id="L30">    buildUI();</span>
<span class="nc" id="L31">  }</span>

  @Override
  protected void buildUI() {
<span class="nc" id="L35">    Table table = new Table();</span>
<span class="nc" id="L36">    table.setFillParent(true);</span>

<span class="nc" id="L38">    Label.LabelStyle titleStyle = new Label.LabelStyle(titleFont, Color.WHITE);</span>
<span class="nc" id="L39">    Label title = new Label(&quot;Achievements&quot;, titleStyle);</span>

<span class="nc" id="L41">    Label.LabelStyle unlockedStyle = new Label.LabelStyle(bodyFont, Color.WHITE);</span>
<span class="nc" id="L42">    Label.LabelStyle lockedStyle = new Label.LabelStyle(bodyFont, Color.DARK_GRAY);</span>

<span class="nc" id="L44">    table.add(title).padBottom(30).row();</span>

<span class="nc" id="L46">    prefs = Gdx.app.getPreferences(AchievementManager.PREF_NAME);</span>
<span class="nc" id="L47">    setupAchievements();</span>

<span class="nc bnc" id="L49" title="All 2 branches missed.">    for (Achievement a : achievements.values()) {</span>
<span class="nc" id="L50">      boolean unlocked = prefs.getBoolean(a.getName(), false);</span>
<span class="nc" id="L51">      String rowText = a.getName();</span>
      Label row;
<span class="nc bnc" id="L53" title="All 2 branches missed.">      if (unlocked) {</span>
<span class="nc" id="L54">        rowText += &quot; - &quot; + a.getDesc();</span>
<span class="nc" id="L55">        row = new Label(rowText, unlockedStyle);</span>
      } else {
<span class="nc" id="L57">        rowText += &quot; - ???&quot;;</span>
<span class="nc" id="L58">        row = new Label(rowText, lockedStyle);</span>
      }
<span class="nc" id="L60">      table.add(row).padBottom(10).row();</span>
<span class="nc" id="L61">    }</span>

<span class="nc" id="L63">    BitmapFont buttonFont = FontGenerator.generateRobotoFont(24, Color.WHITE, skin);</span>
<span class="nc" id="L64">    BitmapFont confrimFont = FontGenerator.generateRobotoFont(24, Color.RED, skin);</span>
<span class="nc" id="L65">    TextButton.TextButtonStyle buttonStyle =</span>
<span class="nc" id="L66">        new TextButton.TextButtonStyle(skin.get(TextButton.TextButtonStyle.class));</span>

    TextButton resetButton;
<span class="nc bnc" id="L69" title="All 2 branches missed.">    if (aboutToWipeData) {</span>
<span class="nc" id="L70">      buttonStyle.font = confrimFont;</span>
<span class="nc" id="L71">      resetButton = new TextButton(&quot;Are you sure?&quot;, buttonStyle);</span>
    } else {
<span class="nc" id="L73">      buttonStyle.font = buttonFont;</span>
<span class="nc" id="L74">      resetButton = new TextButton(&quot;Reset Data&quot;, buttonStyle);</span>
    }

<span class="nc" id="L77">    resetButton.addListener(</span>
<span class="nc" id="L78">        new ClickListener() {</span>
          @Override
          public void clicked(InputEvent event, float x, float y) {
<span class="nc" id="L81">            playMenuClick();</span>
<span class="nc bnc" id="L82" title="All 2 branches missed.">            if (aboutToWipeData) {</span>
<span class="nc bnc" id="L83" title="All 2 branches missed.">              for (Achievement a : achievements.values()) {</span>
<span class="nc" id="L84">                prefs.putBoolean(a.getName(), false);</span>
<span class="nc" id="L85">              }</span>
<span class="nc" id="L86">              aboutToWipeData = false;</span>
            } else {
<span class="nc" id="L88">              aboutToWipeData = true;</span>
            }
<span class="nc" id="L90">            game.setScreen(new AchievementScreen(game));</span>
<span class="nc" id="L91">          }</span>
        });

<span class="nc" id="L94">    buttonStyle.font = buttonFont;</span>
<span class="nc" id="L95">    TextButton backButton = new TextButton(&quot;Back&quot;, buttonStyle);</span>
<span class="nc" id="L96">    backButton.addListener(</span>
<span class="nc" id="L97">        new ClickListener() {</span>
          @Override
          public void clicked(InputEvent event, float x, float y) {
<span class="nc" id="L100">            game.switchScreen(new MenuScreen(game));</span>
<span class="nc" id="L101">            playMenuClick();</span>
<span class="nc" id="L102">            aboutToWipeData = false;</span>
<span class="nc" id="L103">          }</span>
        });

<span class="nc" id="L106">    table.add(resetButton).width(200).height(60).padBottom(20).row();</span>
<span class="nc" id="L107">    table.add(backButton).width(200).height(60);</span>

<span class="nc" id="L109">    stage.addActor(table);</span>
<span class="nc" id="L110">  }</span>

  private void setupAchievements() {
<span class="nc bnc" id="L113" title="All 2 branches missed.">    for (int i = 0; i &lt; achievementNames.length; i++) {</span>
<span class="nc" id="L114">      achievements.put(</span>
          achievementNames[i], new Achievement(achievementNames[i], achievementDescriptions[i]));
    }
<span class="nc" id="L117">  }</span>

  @Override
  protected float[] getBackgroundColor() {
<span class="nc" id="L121">    return new float[] {0.3f, 0.1f, 0.2f}; // Dark blue</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.13.202504020838</span></div></body></html>